(function(t){function e(e){for(var a,o,r=e[0],c=e[1],l=e[2],u=0,d=[];u<r.length;u++)o=r[u],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&d.push(i[o][0]),i[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);p&&p(e);while(d.length)d.shift()();return s.push.apply(s,l||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],a=!0,o=1;o<n.length;o++){var r=n[o];0!==i[r]&&(a=!1)}a&&(s.splice(e--,1),t=c(c.s=n[0]))}return t}var a={},o={0:0},i={0:0},s=[];function r(t){return c.p+"js/"+({}[t]||t)+"."+{2:"1024b09a"}[t]+".js"}function c(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(t){var e=[],n={2:1};o[t]?e.push(o[t]):0!==o[t]&&n[t]&&e.push(o[t]=new Promise((function(e,n){for(var a="css/"+({}[t]||t)+"."+{2:"379f1529"}[t]+".css",i=c.p+a,s=document.getElementsByTagName("link"),r=0;r<s.length;r++){var l=s[r],u=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(u===a||u===i))return e()}var d=document.getElementsByTagName("style");for(r=0;r<d.length;r++){l=d[r],u=l.getAttribute("data-href");if(u===a||u===i)return e()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=e,p.onerror=function(e){var a=e&&e.target&&e.target.src||i,s=new Error("Loading CSS chunk "+t+" failed.\n("+a+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=a,delete o[t],p.parentNode.removeChild(p),n(s)},p.href=i;var m=document.getElementsByTagName("head")[0];m.appendChild(p)})).then((function(){o[t]=0})));var a=i[t];if(0!==a)if(a)e.push(a[2]);else{var s=new Promise((function(e,n){a=i[t]=[e,n]}));e.push(a[2]=s);var l,u=document.createElement("script");u.charset="utf-8",u.timeout=120,c.nc&&u.setAttribute("nonce",c.nc),u.src=r(t);var d=new Error;l=function(e){u.onerror=u.onload=null,clearTimeout(p);var n=i[t];if(0!==n){if(n){var a=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src;d.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",d.name="ChunkLoadError",d.type=a,d.request=o,n[1](d)}i[t]=void 0}};var p=setTimeout((function(){l({type:"timeout",target:u})}),12e4);u.onerror=u.onload=l,document.head.appendChild(u)}return Promise.all(e)},c.m=t,c.c=a,c.d=function(t,e,n){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)c.d(n,a,function(e){return t[e]}.bind(null,a));return n},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/",c.oe=function(t){throw console.error(t),t};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],u=l.push.bind(l);l.push=e,l=l.slice();for(var d=0;d<l.length;d++)e(l[d]);var p=u;s.push([0,1]),n()})({0:function(t,e,n){t.exports=n("2f39")},"1e4c":function(t,e,n){"use strict";n.r(e),n.d(e,"notify_p",(function(){return o})),n.d(e,"notify_n",(function(){return i}));var a=n("2a19");function o(t){a["a"].create({message:`${t}`,type:"positive"})}function i(t){a["a"].create({message:`${t} `,type:"negative"})}},"1e5b":function(t,e,n){},2698:function(t,e,n){},"28cc":function(t,e,n){"use strict";n("dae3")},"2da0":function(t,e,n){"use strict";n("1e5b")},"2f39":function(t,e,n){"use strict";n.r(e);var a={};n.r(a),n.d(a,"loggedIn",(function(){return $})),n.d(a,"userEmail",(function(){return S})),n.d(a,"accessToken",(function(){return k})),n.d(a,"user",(function(){return D})),n.d(a,"location",(function(){return L})),n.d(a,"weather",(function(){return T})),n.d(a,"institution",(function(){return Q}));var o={};n.r(o),n.d(o,"updateLocalStorage",(function(){return A})),n.d(o,"destroyToken",(function(){return O})),n.d(o,"SetUser",(function(){return I})),n.d(o,"SetLocation",(function(){return N})),n.d(o,"SetWeather",(function(){return j})),n.d(o,"SetInstitution",(function(){return E}));var i={};n.r(i),n.d(i,"loginUser",(function(){return J})),n.d(i,"logoutUser",(function(){return V})),n.d(i,"getDataUser",(function(){return z})),n.d(i,"setLocation",(function(){return G})),n.d(i,"setWeather",(function(){return W})),n.d(i,"setInstitution",(function(){return X}));n("5319"),n("9f29"),n("7d6e"),n("e54f"),n("985d"),n("31cd");var s=n("2b0e"),r=n("1f91"),c=n("42d2"),l=n("b05d"),u=n("f508"),d=n("2a19"),p=n("436b"),m=n("9c64"),h=n("515f"),f=n("18d6");s["a"].use(l["a"],{config:{plugins:["LocalStorage","SessionStorage"]},lang:r["a"],iconSet:c["a"],plugins:{Loading:u["a"],Notify:d["a"],Dialog:p["a"],Meta:m["a"],Cookies:h["a"],LocalStorage:f["a"]}});var g=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"q-app"}},[n("router-view")],1)},b=[],y={name:"App"},v=y,w=n("2877"),q=Object(w["a"])(v,g,b,!1,null,null,null),_=q.exports,C=n("2f62"),x=function(){return{user:h["a"].get("ntcuser")||null,accessToken:h["a"].get("ntctoken")||null,location:h["a"].get("ntclocation")||null,weather:h["a"].get("ntcweather")||null,institution:h["a"].get("ntcinstitution")||null}};function $(t){return null!=t.accessToken}function S(t){return t.user_email}function k(t){return t.accessToken||null}function D(t){return t.user||null}function L(t){return t.location||null}function T(t){return t.weather||null}function Q(t){return t.institution||null}const P=h["a"],A=(t,{access:e})=>{P.set("ntctoken",e,{expires:"1h 00m",path:"/"}),t.accessToken=e},O=t=>{P.remove("ntctoken"),P.remove("ntcuser"),t.accessToken=t.user=null},I=(t,e)=>{P.set("ntcuser",e,{expires:"8h",path:"/"}),t.user=e},N=(t,e)=>{P.set("ntclocation",e,{expires:"2h",path:"/"}),t.location=e},j=(t,e)=>{P.set("ntcweather",e,{expires:"2h",path:"/"}),t.weather=e},E=(t,e)=>{P.set("ntcinstitution",e,{expires:"2h",path:"/"}),t.institution=e};var M=n("bc3a"),U=n.n(M);function R(){return"/api/"}function B(){return R().includes("127.0.0.1")?"http://127.0.0.1:8000":""}function F(t){let e=new FormData;for(let n in t)t[n]&&(n.includes("_id")&&"object"===typeof t?e.append(n,t[n].id):e.append(n,t[n]));return e}const Y={days:["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"],daysShort:["Dom","Lun","Mar","Miér","Jue","Vie","Sáb"],months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],monthsShort:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"]};n("d612");const H=U.a.create({baseURL:R(),headers:{"Access-Control-Allow-Origin":"*","access-key":"Bearer iowl3HM3OPNYPdk6H497w1OEGbWxVauua6akOJib"}});function J(t,e){return new Promise(((n,a)=>{let o=new FormData;o.append("email",e.username),o.append("password",e.password),H.post("auth/login",o).then((e=>{203===e.status?this.$router.push("password-expired/"+e.data.user_token):(t.dispatch("getDataUser",{access:e.data.access_token}),t.commit("updateLocalStorage",{access:e.data.access_token}),n(e))})).catch((t=>{console.log(t),a(t)}))}))}function V(t){if(t.getters.loggedIn)return new Promise(((e,n)=>{t.commit("destroyToken"),e(!0)}))}function z(t,e){return new Promise(((n,a)=>{H.post("auth/me?token="+e.access).then((e=>{t.commit("SetUser",e.data),n()})).catch((t=>{a(t)}))}))}function G(t,e){t.commit("SetLocation",e)}function W(t,e){t.commit("SetWeather",e)}function X(t,e){t.commit("SetInstitution",e)}var Z={namespaced:!0,state:x,getters:a,mutations:o,actions:i};s["a"].use(C["a"]);var K=function(){const t=new C["a"].Store({modules:{mystore:Z},strict:!1});return t},tt=n("8c4f"),et=(n("ddb0"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-layout",{attrs:{view:"lHh Lpr lFf"}},[n("q-page-container",[n("router-view")],1)],1)}),nt=[],at={name:"NoneLayout",mounted(){this.loggedIn||(this.$notify.notify_n("Debe iniciar sesión primero"),setTimeout((()=>{this.$router.push({name:"login"})}),1e3))}},ot=at,it=n("4d5a"),st=n("09e3"),rt=n("eebe"),ct=n.n(rt),lt=Object(w["a"])(ot,et,nt,!1,null,null,null),ut=lt.exports;ct()(lt,"components",{QLayout:it["a"],QPageContainer:st["a"]});var dt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-layout",{staticClass:"shadow-2 rounded-borders",attrs:{view:"lHh Lpr lff"}},[n("q-header",{staticClass:"text-info q-pa-sm custom-backgroud",attrs:{elevated:""}},[n("q-toolbar",[n("img",{staticClass:"hidden-xs",staticStyle:{"max-width":"8rem"},attrs:{alt:"isu-corp-logo",src:"https://images.squarespace-cdn.com/content/v1/5984b064e45a7c8bbb3b45d4/1554750516770-0L99LQ8P82RTXBR2L6CC/LOGO+VERSION+08-2015+HD.png?format=1500w"}}),n("q-btn-dropdown",{staticStyle:{color:"#219ebc",right:"0",position:"absolute"},attrs:{flat:"",push:"","no-caps":""},scopedSlots:t._u([{key:"label",fn:function(){return[n("div",{staticClass:"row items-center no-wrap"},[null!==t.user.photo?n("q-avatar",{attrs:{size:"42px"}},[n("img",{attrs:{src:t.user.photo}})]):n("q-avatar",{staticClass:"text-uppercase",attrs:{color:"accent","text-color":"white"}},[t._v("\n              "+t._s(t.user.name.charAt(0)+""+t.user.lastname.charAt(0))+"\n            ")]),n("div",{staticClass:"q-ml-lg text-center"},[t._v("\n              "+t._s(t.user.fullname)+"\n              "),n("br"),n("span",{staticClass:"text-caption text-grey"},[t._v("\n                "+t._s(t.user.roles.nombre)+"\n              ")])])],1)]},proxy:!0}])},[n("q-list",[n("q-item",{attrs:{clickable:""},on:{click:function(e){return t.$router.push("/logout")}}},[t.logout.icon?n("q-item-section",{attrs:{avatar:""}},[n("q-icon",{attrs:{color:"accent",name:t.logout.icon}})],1):t._e(),n("q-item-section",[n("q-item-label",{staticClass:"text-accent"},[t._v("\n                "+t._s(t.logout.title)+"\n              ")])],1)],1)],1)],1)],1)],1),n("q-page-container",[n("router-view")],1)],1)},pt=[],mt=n("bd4c"),ht={name:"MainLayout",data(){return{time:mt["b"].formatDate(Date.now(),"dddd, MMMM DD, YYYY",Y),leftDrawerOpen:!1,miniState:!1,weather_icon_url:"https://openweathermap.org/img/w/",logout:{title:"Cerrar Sesión",icon:"logout",link:""},hour:"",busqueda:"",currentTime:null,currentDate:null,unknown_logo:"",notifications:[],notifications_qty:0,defaultImg:"https://images.squarespace-cdn.com/content/v1/5984b064e45a7c8bbb3b45d4/1503678804630-WTJ72UJG3OGLJS0TB2XR/favicon.ico?format=100w",app_logo:"https://images.squarespace-cdn.com/content/v1/5984b064e45a7c8bbb3b45d4/1554750516770-0L99LQ8P82RTXBR2L6CC/LOGO+VERSION+08-2015+HD.png?format=1500w"}},methods:{findClima(t,e){fetch("http://api.openweathermap.org/data/2.5/weather?lat="+e+"&lon="+t+"&appid=d348c70ea14270f652b3508e454fc0be&lang=es&units=metric").then((t=>t.json())).then((t=>{this.$store.dispatch("mystore/setWeather",t)})).catch((t=>{console.error(t)}))},find_location(){fetch(window.location.protocol+"//api.ipify.org/?format=json").then((t=>t.json())).then((t=>{fetch("https://ipapi.co/"+t.ip+"/json").then((t=>t.json())).then((t=>{this.$store.dispatch("mystore/setLocation",t),this.findClima(t.longitude,t.latitude)})).catch((t=>{console.log("error",t)}))})).catch((t=>{console.log("error",t)}))},drawerClick(t){this.miniState&&(this.miniState=!1,t.stopPropagation())},updateCurrentDateTime(){this.currentTime=(new Date).toLocaleTimeString()},fetchNotifications(){this.$q.loading.show(),this.$axios.post("/notification").then((t=>{this.notifications=t.data.data,this.notifications_qty=t.data.count_notifications,this.$q.loading.hide()})).catch((t=>{this.$q.loading.hide(),console.log("fail",t)}))},markAsRead(){this.$q.loading.show(),this.$axios.post("/notification/read-all").then((t=>{this.notifications=t.data.data,this.notifications_qty=t.data.count_notifications,this.$q.loading.hide()})).catch((t=>{this.$q.loading.hide(),console.log("fail",t)}))},markReadOne(t){if(null===t.read_at){this.$q.loading.show();let e=new FormData;e.append("notification_id",t.id),this.$axios.post("/notification/read-one",e).then((t=>{this.notifications=t.data.data,this.notifications_qty=t.data.count_notifications,this.$q.loading.hide()})).catch((t=>{this.$q.loading.hide(),console.log("fail",t)}))}},formatDate(t){return mt["b"].formatDate(t,"DD/MM/YYYY H:mm:ss ")}},mounted(){this.loggedIn?(this.fetchNotifications(),this.currentTime=(new Date).toLocaleTimeString(),this.currentDate=(new Date).toLocaleDateString(),setInterval((()=>this.updateCurrentDateTime()),1e3)):(this.$notify.notify_n("Debe iniciar sesión primero"),setTimeout((()=>{this.$router.push({name:"login"})}),1e3))},computed:{...Object(C["b"])({loggedIn:"mystore/loggedIn",user:"mystore/user"})}},ft=ht,gt=(n("2da0"),n("a9a3"),n("e359")),bt=n("65c6"),yt=n("f20b"),vt=n("cb32"),wt=n("1c1c"),qt=n("66e5"),_t=n("4074"),Ct=n("0016"),xt=n("0170"),$t=n("9404"),St=n("eaac"),kt=n("8572"),Dt=n("3b73"),Lt=n("f09f"),Tt=Object(w["a"])(ft,dt,pt,!1,null,null,null),Qt=Tt.exports;ct()(Tt,"components",{QLayout:it["a"],QHeader:gt["a"],QToolbar:bt["a"],QBtnDropdown:yt["a"],QAvatar:vt["a"],QList:wt["a"],QItem:qt["a"],QItemSection:_t["a"],QIcon:Ct["a"],QItemLabel:xt["a"],QPageContainer:st["a"],QDrawer:$t["a"],QTable:St["a"],QField:kt["a"],QExpansionItem:Dt["a"],QCard:Lt["a"]});var Pt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"row justify-center",style:t.$q.screen.gt.sm?"padding-top: 3%":"padding-top: 12%"},[n("div",{staticClass:"col-11"},[n("div",{staticClass:"q-mb-lg",class:(t.$q.screen.gt.sm,"")},[n("div",{staticClass:"row q-gutter-sm items-center text-right"},[n("div",{staticClass:"col-12 q-my-md"},[n("q-table",{attrs:{title:"Reservaciones",grid:t.$q.screen.xs,data:t.data,columns:t.columns,pagination:t.pagination,filter:t.filter,"hide-pagination":"",dense:"","no-data-label":"no hay resultados para mostrar","rows-per-page-label":"Elementos por página","pagination-label":function(t,e,n){return t+"-"+e+" de "+n+" resultados"}},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"no-data",fn:function(e){e.icon;var a=e.message;e.filter;return[n("div",{staticClass:"full-width row flex-center text-accent q-gutter-sm"},[n("q-icon",{attrs:{size:"2em",name:"sentiment_dissatisfied"}}),n("span",[t._v("\n                  Lo sentimos mucho... "+t._s(a)+"\n                ")]),n("q-icon",{attrs:{size:"2em",name:"filter_b_and_w"}})],1)]}},{key:"top-right",fn:function(e){return[n("div",{staticClass:"q-gutter-sm items-center q-pt-md"},[n("div",{staticClass:"col-12 row q-gutter-y-md"},[n("div",{staticClass:"col-xs-12 col-sm-6 col-md-6 col-lg-6 q-pr-sm"},[n("q-input",{attrs:{dense:"",debounce:"300",outlined:"",rounded:"",placeholder:"Buscar"},scopedSlots:t._u([{key:"append",fn:function(){return[n("q-icon",{attrs:{name:"search"}})]},proxy:!0}],null,!0),model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}})],1),n("div",{staticClass:"col-xs-12 col-sm-6 col-md-6 col-lg-6 q-pr-sm"},[n("q-btn",{attrs:{color:"primary",label:"Agregar Reservación","no-caps":"",icon:"add",rounded:""},on:{click:t.getAdd}})],1)])])]}},{key:"body-cell-actions",fn:function(e){return[n("q-td",{attrs:{props:e}},[n("q-btn",{staticClass:"q-ml-sm text-primary",attrs:{icon:"edit",round:"",flat:"",size:"sm"},on:{click:function(n){return t.getUpdate(e.row)}}},[n("q-tooltip",[t._v("\n                    Editar\n                  ")])],1),n("q-btn",{staticClass:"q-ml-sm text-negative",attrs:{icon:"delete_forever",round:"",flat:"",size:"sm"},on:{click:function(n){return t.deleteDialog(e.row)}}},[n("q-tooltip",[t._v("\n                    Eliminar\n                  ")])],1)],1)]}}])}),n("div",{staticClass:"row justify-center q-mt-md"},[n("q-pagination",{attrs:{color:"primary",max:t.pagesNumber,size:"sm"},model:{value:t.pagination.page,callback:function(e){t.$set(t.pagination,"page",e)},expression:"pagination.page"}})],1),n("q-dialog",{attrs:{persistent:""},model:{value:t.action,callback:function(e){t.action=e},expression:"action"}},[n("q-card",{style:t.$q.screen.gt.sm?"width: 100%; max-width: 60vw":""},[n("q-bar",{staticClass:"text-white bg-accent q-py-xs",staticStyle:{height:"auto"}},[n("div",{staticStyle:{"font-weight":"600"}},[t._v(t._s(t.addOrUpdate)+" reservación")]),n("q-space"),n("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",dense:"",icon:"close"},on:{click:function(e){t.adding=!1}}})],1),n("q-form",{on:{submit:t.processAction}},[n("q-card-section",[n("div",{staticClass:"row q-mt-lg"},[n("div",{staticClass:"col-12"},[n("div",{staticClass:"row q-gutter-y-md"},[n("div",{staticClass:"col-xs-12 col-sm-12 col-md-6 col-lg-6 q-pr-sm"},[n("q-input",{attrs:{label:"Nombre del contacto*",dense:"",rules:[t.$rules.required("Campo obligatorio")]},model:{value:t.contact.contact_name,callback:function(e){t.$set(t.contact,"contact_name",e)},expression:"contact.contact_name"}})],1),n("div",{staticClass:"col-xs-12 col-sm-12 col-md-6 col-lg-6 q-pr-sm"},[n("q-input",{attrs:{label:"Teléfono",dense:""},model:{value:t.contact.phone_number,callback:function(e){t.$set(t.contact,"phone_number",e)},expression:"contact.phone_number"}})],1),n("div",{staticClass:"col-xs-12 col-sm-12 col-md-6 col-lg-6 q-pr-sm"},[n("q-input",{attrs:{dense:"",mask:"date",rules:["date",t.$rules.required("Campo obligatorio")]},scopedSlots:t._u([{key:"append",fn:function(){return[n("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[n("q-popup-proxy",{ref:"qDateProxy",attrs:{"transition-show":"scale","transition-hide":"scale"}},[n("q-date",{attrs:{color:"accent"},model:{value:t.contact.birth_day,callback:function(e){t.$set(t.contact,"birth_day",e)},expression:"contact.birth_day"}},[n("div",{staticClass:"row items-center justify-end"},[n("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Aceptar",color:"accent",flat:""}})],1)])],1)],1)]},proxy:!0}]),model:{value:t.contact.birth_day,callback:function(e){t.$set(t.contact,"birth_day",e)},expression:"contact.birth_day"}})],1),n("div",{staticClass:"col-xs-12 col-sm-12 col-md-6 col-lg-6 q-pr-sm"},[n("q-select",{attrs:{"transition-show":"flip-up","transition-hide":"flip-down",options:t.contacts_types,"option-label":function(t){return t.name},label:"Tipo de contacto*",rules:[function(t){return t||"Tipo de contacto"}],dense:""},scopedSlots:t._u([{key:"no-option",fn:function(){return[n("q-item",[n("q-item-section",{staticClass:"text-grey"},[t._v("\n                                  No hay opciones\n                                ")])],1)]},proxy:!0}]),model:{value:t.contact_type,callback:function(e){t.contact_type=e},expression:"contact_type"}})],1)])])]),n("div",{staticClass:"row q-mt-lg"},[n("div",{staticClass:"col text-right q-gutter-x-sm"},[n("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Cancelar",color:"negative","no-caps":""}}),n("q-btn",{attrs:{label:"Aceptar",color:"accent",type:"submit","no-caps":""}})],1)])])],1)],1)],1),t.selected?n("q-dialog",{model:{value:t.deleting,callback:function(e){t.deleting=e},expression:"deleting"}},[n("q-card",{staticStyle:{border:"2px solid #fe0a15"},style:t.$q.screen.gt.sm?"width: 100%; max-width: 40vw":""},[n("q-bar",{staticClass:"text-white bg-secondary",staticStyle:{height:"40px"}},[n("div",{staticStyle:{"font-weight":"600"}},[t._v("Eliminar")]),n("q-space"),n("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",dense:"",icon:"close"}})],1),n("q-card-section",{staticClass:"q-pt-none",staticStyle:{"padding-right":"30px","padding-left":"30px"}},[n("div",{staticClass:"row q-mt-lg"},[n("div",{staticClass:"col"},[n("p",{staticClass:"q-pt-sm"},[t._v("\n                      ¿Seguro que desea eliminar el contacto: "),n("strong",[t._v(t._s(t.selected.contact_name))]),t._v("?\n                    ")])])]),n("div",{staticClass:"row q-mt-sm"},[n("div",{staticClass:"col text-right q-gutter-x-sm"},[n("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Cancelar",color:"negative","no-caps":""}}),n("q-btn",{attrs:{label:"Aceptar",color:"warning"},on:{click:t.deleteAction}})],1)])])],1)],1):t._e()],1)])])])])},At=[],Ot=n("8a7e"),It={meta:{title:"ISU Corp - Reservaciones",titleTemplate:t=>`${t}`,meta:{description:{name:"description",content:"Listado de Reservaciones"},keywords:{name:"keywords",content:"Reservaciones"},equiv:{"http-equiv":"Content-Type",content:"text/html; charset=UTF-8"},ogTitle:{name:"og:title",template(t){return`${t} - ISU Corp`}}},link:{material:{rel:"stylesheet",href:"https://fonts.googleapis.com/icon?family=Material+Icons"}},script:{ldJson:{type:"application/ld+json",innerHTML:'{ "@context": "http://schema.org" }'}},htmlAttr:{"xmlns:cc":"http://creativecommons.org/ns#",empty:void 0},bodyAttr:{"action-scope":"xyz",empty:void 0},noscript:{default:"This is content for browsers with no JS (or disabled JS)"}},components:{VueTimepicker:Ot["a"]},name:"ContactReservation",data(){return{adding:!1,action:!1,deleting:!1,app_url:B()+"/",filter:"",data:[],data_all:[],pagination:{sortBy:"desc",descending:!1,page:1,rowsPerPage:10},columns:[{name:"contact_name",label:"Nombre del contacto",field:t=>t.contact_name,sortable:!0,align:"center"},{name:"phone_number",label:"Teléfono",field:t=>t.phone_number,sortable:!0,align:"center"},{name:"birth_day",label:"Fecha de nacimiento",field:t=>t.birth_day,sortable:!0,align:"center"},{name:"contact_type_id",label:"Tipo de contacto",field:t=>t.contact_type.name,sortable:!0,align:"center"},{name:"actions",label:"Acciones",field:"-",sortable:!0,align:"center"}],selected:{},contact:{contact_name:"",phone_number:"",birth_day:"",contact_type_id:""},contact_type:"",contacts_types:[]}},methods:{getAdd(){this.$q.loading.show(),this.contact={contact_name:"",phone_number:"",birth_day:"",contact_type_id:""},this.contact_type="",this.adding=!0,this.findRelations()},getUpdate(t){this.$q.loading.show(),this.contact={id:t.id,contact_name:t.contact_name,phone_number:t.phone_number,birth_day:mt["b"].formatDate(t.birth_day,"YYYY/MM/DD"),contact_type_id:t.contact_type_id},this.contact_type=t.contact_type,this.findRelations(),this.$q.loading.hide()},processAction(){if(2===this.step){this.$q.loading.show();let t=new FormData;t=F(this.contact),t.append("contact_type_id",this.contact_type.id),this.adding?this.$axios.post("reservations/new",t).then((t=>{201===t.status?(this.adding=!1,this.action=!1,this.$notify.notify_p("Contacto agregado correctamente"),this.fetchData()):(this.$q.loading.hide(),this.$notify.notify_n(t.data.data))})).catch((t=>{console.log("error",t),this.$q.loading.hide(),this.$notify.notify_n("Hubo problemas al insertar  el Contacto. Contacte al administrador o intente más tarde")})):this.$axios.post("reservations/update/"+this.contact.id,t).then((t=>{200===t.status?(this.$notify.notify_p("Contacto modificado correctamente"),this.action=!1,this.fetchData()):(this.$notify.notify_n(t.data.data),this.$q.loading.hide())})).catch((t=>{console.log("error",t),this.$q.loading.hide(),this.$notify.notify_n("Hubo problemas al actualizar el Contacto. Contacte al administrador o intente más tarde")}))}else this.step=2},deleteDialog(t){this.selected=t,this.deleting=!0},deleteAction(){this.deleting&&(this.$q.loading.show(),this.$axios.post("reservations/delete/"+this.selected.id).then((t=>{204===t.status?(this.deleting=!1,this.$notify.notify_p("Contacto eliminado correctamente."),this.fetchData()):(this.deleting=!1,this.$notify.notify_n(t.data.message),this.$q.loading.hide())})).catch((t=>{console.log(t),this.deleting=!1,this.$q.loading.hide(),this.$notify.notify_n("Hubo problemas al eliminar el Contacto. Contacte al administrador o intente más tarde")})))},findRelations(){this.$axios.post("/contacts-types").then((t=>{this.contacts_types=t.data.data,this.action=!0,this.$q.loading.hide()})).catch((t=>{this.adding=!1,this.$q.loading.hide(),console.log("fail",t)}))},fetchData(){this.$q.loading.show(),this.$axios.post("/reservations").then((t=>{this.data=t.data.data,this.data_all=t.data.data,this.$q.loading.hide()})).catch((t=>{this.$q.loading.hide(),console.log("fail",t)}))}},mounted(){this.fetchData()},computed:{...Object(C["b"])({user:"mystore/user",loggedIn:"mystore/loggedIn"}),addOrUpdate(){return this.adding?"Agregar":"Modificar"},pagesNumber(){return Math.ceil(this.data.length/this.pagination.rowsPerPage)}}},Nt=It,jt=(n("fd78"),n("27f9")),Et=n("9c40"),Mt=n("db86"),Ut=n("05c0"),Rt=n("3b16"),Bt=n("24e8"),Ft=n("d847"),Yt=n("2c91"),Ht=n("0378"),Jt=n("a370"),Vt=n("7cbe"),zt=n("52ee"),Gt=n("ddd8"),Wt=n("7f67"),Xt=Object(w["a"])(Nt,Pt,At,!1,null,null,null),Zt=Xt.exports;ct()(Xt,"components",{QTable:St["a"],QIcon:Ct["a"],QInput:jt["a"],QBtn:Et["a"],QTd:Mt["a"],QTooltip:Ut["a"],QPagination:Rt["a"],QDialog:Bt["a"],QCard:Lt["a"],QBar:Ft["a"],QSpace:Yt["a"],QForm:Ht["a"],QCardSection:Jt["a"],QPopupProxy:Vt["a"],QDate:zt["a"],QSelect:Gt["a"],QItem:qt["a"],QItemSection:_t["a"],QField:kt["a"]}),ct()(Xt,"directives",{ClosePopup:Wt["a"]});var Kt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-page",[n("div",{staticClass:"row login-container login-img"},[n("div",{staticClass:"login-form col-md-4 col-sm-6 col-xs-12"},[n("div",{staticClass:"row flex flex-center q-mt-md q-mb-lg"},[n("div",{staticClass:"col-12 flex flex-center q-my-md"},[n("img",{staticClass:"app-logo",class:t.$q.screen.gt.xs?"w-20":"w-16",attrs:{alt:"isu-corp-logo",src:"https://images.squarespace-cdn.com/content/v1/5984b064e45a7c8bbb3b45d4/1554750516770-0L99LQ8P82RTXBR2L6CC/LOGO+VERSION+08-2015+HD.png?format=1500w"}})]),n("div",{staticClass:"col-12 flex flex-center"},[n("q-form",{staticStyle:{width:"65%"},on:{submit:t.submit_login}},[n("q-input",{staticClass:"text-accent",attrs:{dense:"",label:"Email","lazy-rules":"",rules:[t.$rules.required("Campo obligatorio"),t.$rules.email()]},model:{value:t.credentials.email,callback:function(e){t.$set(t.credentials,"email",e)},expression:"credentials.email"}}),n("q-input",{staticClass:"q-mt-lg text-accent",attrs:{type:t.isPwd?"password":"text",dense:"",label:"Contraseña","lazy-rules":"",rules:[t.$rules.required("Campo obligatorio"),t.$rules.minLength(8)]},scopedSlots:t._u([{key:"append",fn:function(){return[n("q-icon",{staticClass:"cursor-pointer",attrs:{name:t.isPwd?"visibility_off":"visibility"},on:{click:function(e){t.isPwd=!t.isPwd}}})]},proxy:!0}]),model:{value:t.credentials.password,callback:function(e){t.$set(t.credentials,"password",e)},expression:"credentials.password"}}),n("div",{staticClass:"row q-mt-lg q-mb-lg q-pt-lg"},[n("q-btn",{staticClass:"access-button no-margin",attrs:{push:"",label:"Entrar","text-color":"white",type:"submit"}})],1)],1)],1)])])]),n("q-dialog",{model:{value:t.storing,callback:function(e){t.storing=e},expression:"storing"}},[n("Spinner",{attrs:{color:"white"}})],1)],1)},te=[],ee=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-spinner",{attrs:{color:t.color?t.color:"primary",size:"5em"}})},ne=[],ae={name:"Spinner",props:{color:{type:String}},data(){return{}}},oe=ae,ie=n("0d59"),se=Object(w["a"])(oe,ee,ne,!1,null,null,null),re=se.exports;ct()(se,"components",{QSpinner:ie["a"]});var ce={name:"Login",components:{Spinner:re},data(){return{credentials:{email:"",password:""},isPwd:!0,storing:!1}},methods:{submit_login(){this.$q.loading.show(),this.$store.dispatch("mystore/loginUser",{username:this.credentials.email,password:this.credentials.password}).then((()=>{this.$notify.notify_p("Inicio de sesión satisfactorio"),this.$q.loading.hide(),this.$router.push("/contact-reservation/list")})).catch((t=>{console.log("fail login",t),this.$q.loading.hide(),this.$notify.notify_n("Verifique sus credenciales de acceso. Son incorrectas")}))}}},le=ce,ue=(n("3ea4"),n("28cc"),n("9989")),de=Object(w["a"])(le,Kt,te,!1,null,"63d9223e",null),pe=de.exports;ct()(de,"components",{QPage:ue["a"],QForm:Ht["a"],QInput:jt["a"],QIcon:Ct["a"],QBtn:Et["a"],QDialog:Bt["a"],QField:kt["a"]});var me=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"log"})},he=[],fe={created(){this.$store.dispatch("mystore/logoutUser").then((()=>{this.$notify.notify_p("Cierre de sesión correctamente"),this.$router.push("/login")}))}},ge=fe,be=Object(w["a"])(ge,me,he,!1,null,"430ec631",null),ye=be.exports;const ve=[{path:"/",component:ut,children:[{path:"login",name:"login",component:pe},{path:"logout",name:"logout",component:ye}]},{path:"/contact-reservation",component:Qt,children:[{path:"list",name:"list",component:Zt}]},{path:"*",component:()=>n.e(2).then(n.bind(null,"e51e"))}];var we=ve;s["a"].use(tt["a"]);var qe=function(){const t=new tt["a"]({scrollBehavior:()=>({x:0,y:0}),routes:we,mode:"history",base:"/"});return t},_e=async function(){const t="function"===typeof K?await K({Vue:s["a"]}):K,e="function"===typeof qe?await qe({Vue:s["a"],store:t}):qe;t.$router=e;const n={router:e,store:t,render:t=>t(_),el:"#q-app"};return{app:n,store:t,router:e}},Ce=n("4452"),xe=n.n(Ce);s["a"].use(xe.a);const $e=U.a.create({baseURL:R(),headers:{"Content-Type":"application/json;charset=UTF-8","Access-Control-Allow-Origin":"*",Accept:"application/json","access-key":"Bearer iowl3HM3OPNYPdk6H497w1OEGbWxVauua6akOJib"}});$e.interceptors.request.use((function(t){return t.metadata={startTime:new Date},t.url.includes("/login")||(t.headers.authorization="Bearer "+h["a"].get("ntctoken")||!1),t}),(function(t){if(404===t.response.status);else if(401===t.response.status)return this.$notify.notify_n("Expiró la sesión."),window.location="/login",Promise.reject(t);return Promise.reject(t)})),$e.interceptors.response.use((t=>(t.metadata={duration:new Date-t.config.metadata.startTime},t)),(t=>401===t.response.status?((void 0).$notify.notify_n("Expiró la sesión."),window.location="/login",Promise.reject(t)):Promise.reject(t))),s["a"].prototype.$axios=$e,d["a"].setDefaults({position:"top-right",progress:!0,timeout:4500,textColor:"white",actions:[{icon:"close",color:"white"}]}),s["a"].prototype.$notify=n("1e4c");n("498a");var Se=n("b5ae"),ke=n("78ef");s["a"].prototype.$rules={is(t,e){return e=void 0!==e&&e,n=>{let a;switch(typeof t){case"string":a=String(n)===t;break;case"number":a=Number(n)===t;break;default:a=n===t}return a||e}},required(t=!1){return e=>Se["required"](e)||t},minLength(t,e){return e=void 0!==e&&e,n=>Se["minLength"](t)(n)||e},maxLength(t,e){return e=void 0!==e&&e,n=>Se["maxLength"](t)(n)||e},minValue(t,e){return e=void 0!==e&&e,n=>Se["minValue"](t)(n)||e},maxValue(t,e){return e=void 0!==e&&e,n=>Se["maxValue"](t)(n)||e},between(t,e,n){return n=void 0!==n&&n,a=>Se["between"](t,e)(a)||n},betweenLength(t,e,n){return n=void 0!==n&&n,a=>Se["minLength"](t)(a)&&Se["maxLength"](e)(a)||n},alpha(t=!1){return e=>Se["alpha"](e)||t},alphaNum(t=!1){return e=>Se["alphaNum"](e)||t},numeric(t=!1){return e=>Se["numeric"](e)||t},integer(t=!1){return e=>Se["integer"](e)||t},decimal(t=!1){return e=>Se["decimal"](e)||t},email(t=!1){return e=>Se["email"](e)||t},ipAddress(t=!1){return e=>Se["ipAddress"](e)||t},macAddress(t=":",e=!1){return n=>Se["macAddress"](t)(n)||e},url(t=!1){return e=>Se["url"](e)||t},or(...t){let e=!1;return"string"===typeof t[t.length-1]&&(e=t.pop()),n=>Se["or"](...t)(n)||e},and(...t){let e=!1;return"string"===typeof t[t.length-1]&&(e=t.pop()),n=>Se["and"](...t)(n)||e},not(t,e=!1){return n=>Se["not"](t)(n)||e},version(t=!1){return e=>Object(ke["regex"])("version",/^([1-9]\d*).([1-9]\d*).([1-9]\d*).([1-9]\d*)$/)(e)||t},dni(){return t=>{let e,n,a;const o=/^[XYZ]?\d{5,8}[A-Z]$/;let i=t.toUpperCase();return!0===o.test(i)&&(e=i.substr(0,i.length-1),e=e.replace("X",0),e=e.replace("Y",1),e=e.replace("Z",2),n=i.substr(i.length-1,1),e%=23,a="TRWAGMYFPDXBNJZSQVHLCKET",a=a.substring(e,e+1),a===n)}},cif(){return t=>{let e,n=t.substr(1,t.length-2),a=0;for(e=1;e<n.length;e+=2)a+=parseInt(n.substr(e,1));let o=0;for(e=0;e<n.length;e+=2){let t=2*parseInt(n.substr(e,1));1===String(t).length?o+=parseInt(t):o=o+parseInt(String(t).substr(0,1))+parseInt(String(t).substr(1,1))}a+=o;let i=String(a).substr(String(a).length-1,1);i=10-parseInt(i);let s=t.substr(0,1).toUpperCase();if(s.match(/^[FJKNPQRSUVW]$/)){if(String.fromCharCode(64+i).toUpperCase()===t.substr(t.length-1,1).toUpperCase())return!0}else{if(s.match(/^[XYZ]$/)){let e;return"X"===s?e=t.substr(1):"Y"===s?e="1"+t.substr(1):"Z"===s&&(e="2"+t.substr(1)),validateDNI(e)}if(!s.match(/^[ABCDEFGHLM]$/))return this.validateDNI(t);if(10===i&&(i=0),t.substr(t.length-1,1)===String(i))return!0}return!1}},validateDNI(t){let e="TRWAGMYFPDXBNJZSQVHLCKE",n=t.substr(0,t.length-1),a=t.substr(t.length-1,1).toUpperCase();return e.charAt(n%23)===a},password(t=!1){return e=>{let n=/[a-zA-Z]/.test(e),a=/[0-9]/.test(e);return n&&a||t}},iban_es(){return t=>{var e,n,a,o,i;if(t=t.toUpperCase(),t=t.trim(),t=t.replace(/\s/g,""),24!==t.length)return!1;e=t.substring(0,1),n=t.substring(1,2),a=this.getnumIBAN(e),o=this.getnumIBAN(n),i=String(a)+String(o)+t.substring(2),i=i.substring(6)+i.substring(0,6);let s=this.modulo97(i);return 1===s}},getnumIBAN(t){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZ";return e.search(t)+10},modulo97(t){let e=Math.ceil(t.length/7),n="";for(var a=1;a<=e;a++)n=parseFloat(n+t.substr(7*(a-1),7))%97;return n}};n("96cf");var De=n("63d6"),Le=n.n(De);s["a"].use(Le.a),s["a"].use(n("2ead"));const Te="/";async function Qe(){const{app:t,store:e,router:n}=await _e();let a=!1;const o=t=>{a=!0;const e=Object(t)===t?n.resolve(t).route.fullPath:t;window.location.href=e},i=window.location.href.replace(window.location.origin,""),r=[void 0,void 0,void 0,void 0,void 0,void 0];for(let l=0;!1===a&&l<r.length;l++)if("function"===typeof r[l])try{await r[l]({app:t,router:n,store:e,Vue:s["a"],ssrContext:null,redirect:o,urlPath:i,publicPath:Te})}catch(c){return c&&c.url?void(window.location.href=c.url):void console.error("[Quasar] boot error:",c)}!0!==a&&new s["a"](t)}Qe()},"31cd":function(t,e,n){},"33d1":function(t,e,n){},"3ea4":function(t,e,n){"use strict";n("deb7")},a9a3:function(t,e,n){"use strict";n("2698")},dae3:function(t,e,n){},deb7:function(t,e,n){},fd78:function(t,e,n){"use strict";n("33d1")}});